{{! @glint-nocheck: not typesafe yet }}
<AuModal
  class='au-c-modal--flush'
  @size='large'
  @modalTitle={{t 'editor-plugins.roadsign-regulation.modal.title'}}
  @modalOpen={{@modalOpen}}
  @closeModal={{this.closeModal}}
  as |Modal|
>
  <Modal.Body>
    <div class='au-c-body-container'>
      <div class='au-o-box au-u-background-gray-100'>
        <div class='au-o-grid au-o-grid--tiny au-o-grid--bottom'>
          <div class='au-o-grid__item au-u-1-4'>
            <AuLabel>
              {{t 'editor-plugins.roadsign-regulation.modal.filter.type'}}
            </AuLabel>
            <PowerSelect
              @renderInPlace={{true}}
              @options={{this.typeOptions}}
              @verticalPosition='below'
              @searchEnabled={{true}}
              @searchField='label'
              @selected={{or this.selectedType this.selectedCategory}}
              @allowClear={{true}}
              @onChange={{this.changeTypeOrCategory}}
              as |option|
            >
              {{option.label}}
            </PowerSelect>
          </div>
          <div class='au-o-grid__item au-u-1-4'>
            <AuLabel>
              {{t 'editor-plugins.roadsign-regulation.modal.filter.code'}}
            </AuLabel>
            <PowerSelect
              @renderInPlace={{true}}
              @verticalPosition='below'
              @searchEnabled={{true}}
              @search={{this.searchCodes}}
              @selected={{this.selectedCode}}
              @allowClear={{true}}
              @onChange={{this.changeCode}}
              as |option|
            >
              {{option.label}}
            </PowerSelect>
          </div>
          <div class='au-o-grid__item au-u-1-4'>
            <AuLabel>
              {{t 'editor-plugins.roadsign-regulation.modal.combine-with-code'}}
            </AuLabel>
            <PowerSelectMultiple
              @renderInPlace={{true}}
              @verticalPosition='below'
              @searchEnabled={{true}}
              @searchField='label'
              @selected={{this.selectedCodeCombination}}
              @allowClear={{true}}
              @onChange={{this.changeCodeCombination}}
              @options={{this.codeCombinationOptions}}
              @disabled={{not this.selectedCode}}
              as |option|
            >
              {{option.label}}
            </PowerSelectMultiple>
          </div>
          <div class='au-o-grid__item au-u-1-4'>
            <AuLabel>
              {{t
                'editor-plugins.roadsign-regulation.modal.filter.zonal-validity'
              }}
            </AuLabel>
            <PowerSelect
              @renderInPlace={{true}}
              @options={{this.zonalityOptions}}
              @verticalPosition='below'
              @searchEnabled={{false}}
              @selected={{this.selectedZonality}}
              @allowClear={{true}}
              @onChange={{this.changeZonality}}
              as |option|
            >
              {{option.label}}
            </PowerSelect>
          </div>
          <div class='au-o-grid__item au-u-1-4'>
            <AuLabel>
              {{t 'editor-plugins.roadsign-regulation.modal.filter.text'}}
            </AuLabel>
            <AuInput
              value={{this.searchQuery}}
              {{on 'input' this.handleSearch}}
            />
          </div>
        </div>
      </div>
      <div class='au-c-body-container'>
        <RoadsignRegulationPlugin::RoadsignsTable
          @content={{this.measures}}
          @isLoading={{this.measuresQuery.isLoading}}
          @insert={{this.insertHtml}}
          @count={{this.measureCount}}
          @goToPage={{this.goToPage}}
          @pageSize={{this.pageSize}}
          @pageStart={{this.pageNumber}}
          @options={{@options}}
        />
        {{#if this.measureCount}}
          {{#let
            (pagination
              page=this.pageNumber
              pageSize=this.pageSize
              count=this.measureCount
            )
            as |pg|
          }}
            <Pagination::PaginationView
              @totalCount={{pg.count}}
              @rangeStart={{pg.pageStart}}
              @rangeEnd={{pg.pageEnd}}
              @onNextPage={{this.goToNextPage}}
              @onPreviousPage={{this.goToPreviousPage}}
              @isFirstPage={{not pg.hasPreviousPage}}
              @isLastPage={{not pg.hasNextPage}}
            />
          {{/let}}
        {{/if}}
      </div>
    </div>
  </Modal.Body>
</AuModal>